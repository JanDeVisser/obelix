#include <gtest/gtest.h>

#include <oblasm/Assembler.h>

#include "AsmTest.h"

namespace Obelix::Assembler {

CHECK_SIMPLE_INSTR("nop", 0)
CHECK_8BIT_IMM("mov a, {}", 1)
CHECK_16BIT_IMM_IND("mov a, {}", 2)
CHECK_SIMPLE_INSTR("mov a,b", 3)
CHECK_SIMPLE_INSTR("mov a,c", 4)
CHECK_SIMPLE_INSTR("mov a,d", 5)
CHECK_8BIT_IMM("mov b, {}", 6)
CHECK_16BIT_IMM_IND("mov b, {}", 7)
CHECK_SIMPLE_INSTR("mov b,a", 8)
CHECK_SIMPLE_INSTR("mov b,c", 9)
CHECK_SIMPLE_INSTR("mov b,d", 10)
CHECK_8BIT_IMM("mov c, {}", 11)
CHECK_16BIT_IMM_IND("mov c, {}", 12)
CHECK_SIMPLE_INSTR("mov c,a", 13)
CHECK_SIMPLE_INSTR("mov c,b", 14)
CHECK_SIMPLE_INSTR("mov c,d", 15)
CHECK_8BIT_IMM("mov d, {}", 16)
CHECK_16BIT_IMM_IND("mov d, {}", 17)
CHECK_SIMPLE_INSTR("mov d,a", 18)
CHECK_SIMPLE_INSTR("mov d,b", 19)
CHECK_SIMPLE_INSTR("mov d,c", 20)
CHECK_16BIT_IMM("mov sp, {}", 21)
CHECK_16BIT_IMM_IND("mov sp, {}", 22)
CHECK_SIMPLE_INSTR("mov sp,si", 23)
CHECK_16BIT_IMM("mov si, {}", 24)
CHECK_16BIT_IMM_IND("mov si, {}", 25)
CHECK_SIMPLE_INSTR("mov si,cd", 26)
CHECK_16BIT_IMM("mov di, {}", 27)
CHECK_16BIT_IMM_IND("mov di, {}", 28)
CHECK_SIMPLE_INSTR("mov di,cd", 29)
CHECK_SIMPLE_INSTR("mov a, *si", 30)
CHECK_SIMPLE_INSTR("mov b,*si", 31)
CHECK_SIMPLE_INSTR("mov c,*si", 32)
CHECK_SIMPLE_INSTR("mov d,*si", 33)
CHECK_SIMPLE_INSTR("mov a,*di", 34)
CHECK_SIMPLE_INSTR("mov b,*di", 35)
CHECK_SIMPLE_INSTR("mov c,*di", 36)
CHECK_SIMPLE_INSTR("mov d,*di", 37)
CHECK_SIMPLE_INSTR("mov *di,*si", 38)
CHECK_16BIT_IMM("jmp {}", 39)
CHECK_16BIT_IMM("jnz {}", 40)
CHECK_16BIT_IMM("jc {}", 41)
CHECK_16BIT_IMM("jv {}", 42)
CHECK_16BIT_IMM("call {}", 43)
CHECK_SIMPLE_INSTR("ret", 44)
CHECK_SIMPLE_INSTR("push a", 45)
CHECK_SIMPLE_INSTR("push b", 46)
CHECK_SIMPLE_INSTR("push c", 47)
CHECK_SIMPLE_INSTR("push d", 48)
CHECK_SIMPLE_INSTR("push si", 49)
CHECK_SIMPLE_INSTR("push di", 50)
CHECK_SIMPLE_INSTR("pop a", 51)
CHECK_SIMPLE_INSTR("pop b", 52)
CHECK_SIMPLE_INSTR("pop c", 53)
CHECK_SIMPLE_INSTR("pop d", 54)
CHECK_SIMPLE_INSTR("pop si", 55)
CHECK_SIMPLE_INSTR("pop di", 56)
CHECK_16BIT_IMM_IND("mov {}, a", 57)
CHECK_SIMPLE_INSTR("mov *di, a", 58)
CHECK_16BIT_IMM_IND("mov {}, b", 59)
CHECK_SIMPLE_INSTR("mov *di, b", 60)
CHECK_16BIT_IMM_IND("mov {}, c", 61)
CHECK_SIMPLE_INSTR("mov *di, c", 62)
CHECK_16BIT_IMM_IND("mov {}, d", 63)
CHECK_SIMPLE_INSTR("mov *di, d", 64)
CHECK_16BIT_IMM_IND("mov {}, si", 65)
CHECK_16BIT_IMM_IND("mov {}, di", 66)
CHECK_16BIT_IMM_IND("mov {}, cd", 67)
CHECK_SIMPLE_INSTR("mov *si,cd", 68)
CHECK_SIMPLE_INSTR("mov *di,cd", 69)
CHECK_SIMPLE_INSTR("add a,b", 70)
CHECK_SIMPLE_INSTR("adc a,b", 71)
CHECK_SIMPLE_INSTR("sub a,b", 72)
CHECK_SIMPLE_INSTR("sbb a,b", 73)
CHECK_SIMPLE_INSTR("and a,b", 74)
CHECK_SIMPLE_INSTR("or a,b", 75)
CHECK_SIMPLE_INSTR("xor a,b", 76)
CHECK_SIMPLE_INSTR("not a", 77)
CHECK_SIMPLE_INSTR("shl a", 78)
CHECK_SIMPLE_INSTR("shr a", 79)
CHECK_SIMPLE_INSTR("add a,c", 80)
CHECK_SIMPLE_INSTR("adc a,c", 81)
CHECK_SIMPLE_INSTR("sub a,c", 82)
CHECK_SIMPLE_INSTR("sbb a,c", 83)
CHECK_SIMPLE_INSTR("and a,c", 84)
CHECK_SIMPLE_INSTR("or a,c", 85)
CHECK_SIMPLE_INSTR("xor a,c", 86)
CHECK_SIMPLE_INSTR("add a,d", 87)
CHECK_SIMPLE_INSTR("adc a,d", 88)
CHECK_SIMPLE_INSTR("sub a,d", 89)
CHECK_SIMPLE_INSTR("sbb a,d", 90)
CHECK_SIMPLE_INSTR("and a,d", 91)
CHECK_SIMPLE_INSTR("or a,d", 92)
CHECK_SIMPLE_INSTR("xor a,d", 93)
CHECK_SIMPLE_INSTR("add b,c", 94)
CHECK_SIMPLE_INSTR("adc b,c", 95)
CHECK_SIMPLE_INSTR("sub b,c", 96)
CHECK_SIMPLE_INSTR("sbb b,c", 97)
CHECK_SIMPLE_INSTR("and b,c", 98)
CHECK_SIMPLE_INSTR("or b,c", 99)
CHECK_SIMPLE_INSTR("xor b,c", 100)
CHECK_SIMPLE_INSTR("not b", 101)
CHECK_SIMPLE_INSTR("shl b", 102)
CHECK_SIMPLE_INSTR("shr b", 103)
CHECK_SIMPLE_INSTR("add b,d", 104)
CHECK_SIMPLE_INSTR("adc b,d", 105)
CHECK_SIMPLE_INSTR("sub b,d", 106)
CHECK_SIMPLE_INSTR("sbb b,d", 107)
CHECK_SIMPLE_INSTR("and b,d", 108)
CHECK_SIMPLE_INSTR("or b,d", 109)
CHECK_SIMPLE_INSTR("xor b,d", 110)
CHECK_SIMPLE_INSTR("add c,d", 111)
CHECK_SIMPLE_INSTR("adc c,d", 112)
CHECK_SIMPLE_INSTR("sub c,d", 113)
CHECK_SIMPLE_INSTR("sbb c,d", 114)
CHECK_SIMPLE_INSTR("and c,d", 115)
CHECK_SIMPLE_INSTR("or c,d", 116)
CHECK_SIMPLE_INSTR("xor c,d", 117)
CHECK_SIMPLE_INSTR("not c", 118)
CHECK_SIMPLE_INSTR("shl c", 119)
CHECK_SIMPLE_INSTR("shr c", 120)
CHECK_SIMPLE_INSTR("not d", 121)
CHECK_SIMPLE_INSTR("shl d", 122)
CHECK_SIMPLE_INSTR("shr d", 123)
CHECK_SIMPLE_INSTR("clr a", 124)
CHECK_SIMPLE_INSTR("clr b", 125)
CHECK_SIMPLE_INSTR("clr c", 126)
CHECK_SIMPLE_INSTR("clr d", 127)
CHECK_SIMPLE_INSTR("swp a,b", 128)
CHECK_SIMPLE_INSTR("swp a,c", 129)
CHECK_SIMPLE_INSTR("swp a,d", 130)
CHECK_SIMPLE_INSTR("swp b,c", 131)
CHECK_SIMPLE_INSTR("swp b,d", 132)
CHECK_SIMPLE_INSTR("swp c,d", 133)
CHECK_SIMPLE_INSTR("add ab,cd", 134)
CHECK_SIMPLE_INSTR("adc ab,cd", 135)
CHECK_SIMPLE_INSTR("sub ab,cd", 136)
CHECK_SIMPLE_INSTR("sbb ab,cd", 137)
CHECK_16BIT_IMM_IND("jmp {}", 138)
CHECK_16BIT_IMM_IND("jnz {}", 139)
CHECK_16BIT_IMM_IND("jc {}", 140)
CHECK_16BIT_IMM_IND("jv {}", 141)
CHECK_16BIT_IMM_IND("call {}", 142)
CHECK_SIMPLE_INSTR("cmp a,b", 143)
CHECK_SIMPLE_INSTR("cmp a,c", 144)
CHECK_SIMPLE_INSTR("cmp a,d", 145)
CHECK_SIMPLE_INSTR("cmp b,c", 146)
CHECK_SIMPLE_INSTR("cmp b,d", 147)
CHECK_SIMPLE_INSTR("cmp c,d", 148)
CHECK_SIMPLE_INSTR("inc a", 149)
CHECK_SIMPLE_INSTR("inc b", 150)
CHECK_SIMPLE_INSTR("inc c", 151)
CHECK_SIMPLE_INSTR("inc d", 152)
CHECK_SIMPLE_INSTR("dec a", 153)
CHECK_SIMPLE_INSTR("dec b", 154)
CHECK_SIMPLE_INSTR("dec c", 155)
CHECK_SIMPLE_INSTR("dec d", 156)
CHECK_SIMPLE_INSTR("inc si", 157)
CHECK_SIMPLE_INSTR("inc di", 158)
CHECK_SIMPLE_INSTR("dec si", 159)
CHECK_SIMPLE_INSTR("dec di", 160)
CHECK_8BIT_IMM("out {}, a", 161)
CHECK_8BIT_IMM("out {}, b", 162)
CHECK_8BIT_IMM("out {}, c", 163)
CHECK_8BIT_IMM("out {}, d", 164)
CHECK_8BIT_IMM("in a, {}", 165)
CHECK_8BIT_IMM("in b, {}", 166)
CHECK_8BIT_IMM("in c, {}", 167)
CHECK_8BIT_IMM("in d, {}", 168)
CHECK_SIMPLE_INSTR("pushfl", 169)
CHECK_SIMPLE_INSTR("popfl", 170)
CHECK_SIMPLE_INSTR("clrfl", 171)
CHECK_16BIT_IMM("jz {}", 172)
CHECK_16BIT_IMM_IND("jz {}", 173)
CHECK_SIMPLE_INSTR("mov *cd,a", 174)
CHECK_SIMPLE_INSTR("mov *cd,b", 175)
CHECK_8BIT_IMM("cmp a,{}", 176)
CHECK_8BIT_IMM("cmp b,{}", 177)
CHECK_8BIT_IMM("cmp c,{}", 178)
CHECK_8BIT_IMM("cmp d,{}", 179)
CHECK_8BIT_IMM("and a,{}", 180)
CHECK_8BIT_IMM("and b,{}", 181)
CHECK_8BIT_IMM("and c,{}", 182)
CHECK_8BIT_IMM("and d,{}", 183)
CHECK_8BIT_IMM("or a,{}", 184)
CHECK_8BIT_IMM("or b,{}", 185)
CHECK_8BIT_IMM("or c,{}", 186)
CHECK_8BIT_IMM("or d,{}", 187)
CHECK_SIMPLE_INSTR("mov a,*cd", 188)
CHECK_SIMPLE_INSTR("mov b,*cd", 189)

CHECK_SIMPLE_INSTR("rti", 253)
CHECK_16BIT_IMM("nmi {}", 254)
CHECK_SIMPLE_INSTR("hlt", 255)

}