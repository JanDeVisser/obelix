include(FindPkgConfig)
pkg_search_module(SQLITE3 sqlite3)

IF ( NOT SQLITE3_FOUND )
	IF ( SQLITE3_INSTALL_DIR )
		MESSAGE ( STATUS "Using override SQLITE3_INSTALL_DIR to find SQLITE3" )
		SET ( SQLITE3_INCLUDE_DIR  "${SQLITE3_INSTALL_DIR}/include" )
		FIND_LIBRARY( SQLITE3_LIBRARY NAMES SQLITE3 PATHS "${SQLITE3_INSTALL_DIR}/lib" )
	ELSE ( SQLITE3_INSTALL_DIR )
		FIND_PATH( SQLITE3_INCLUDE_DIR sqlite3.h )
		FIND_LIBRARY( SQLITE3_LIBRARIES NAMES sqlite3 )
	ENDIF ( SQLITE3_INSTALL_DIR )

	IF ( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARIES )
		SET( SQLITE3_FOUND 1 )
    SET ( SQLITE3_INCLUDE_DIRS "${SQLITE3_INCLUDE_DIR}" )
		IF ( NOT SQLITE3_FIND_QUIETLY )
			MESSAGE ( STATUS "Found SQLITE3: ${SQLITE3_LIBRARIES}" )
		ENDIF ( NOT SQLITE3_FIND_QUIETLY )
	ELSE ( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARIES )
		IF ( SQLITE3_FIND_REQUIRED )
			MESSAGE( FATAL_ERROR "Could NOT find SQLITE3" )
		ELSE ( SQLITE3_FIND_REQUIRED )
			IF ( NOT SQLITE3_FIND_QUIETLY )
				MESSAGE( STATUS "Could NOT find SQLITE3" )
			ENDIF ( NOT SQLITE3_FIND_QUIETLY )
		ENDIF ( SQLITE3_FIND_REQUIRED )
	ENDIF ( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARIES )
ENDIF( NOT SQLITE3_FOUND )
MESSAGE ( STATUS "Found SQLITE3: -L ${SQLITE3_LIBRARIES} -I ${SQLITE3_INCLUDE_DIRS}" )

# Hide advanced variables from CMake GUIs
MARK_AS_ADVANCED( SQLITE3_INCLUDE_DIR SQLITE3_LIBRARIES )
