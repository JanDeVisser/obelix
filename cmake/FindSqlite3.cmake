include(FindPkgConfig)
pkg_search_module(SQLITE3 sqlite3)

IF ( NOT SQLITE3_FOUND )
	IF ( SQLITE3_INSTALL_DIR )
		MESSAGE ( STATUS "Using override SQLITE3_INSTALL_DIR to find SQLITE3" )
		SET ( SQLITE3_INCLUDE_DIR  "${SQLITE3_INSTALL_DIR}/include" )
		FIND_LIBRARY( SQLITE3_LIBRARY NAMES SQLITE3 PATHS "${SQLITE3_INSTALL_DIR}/lib" )
	ELSE ( SQLITE3_INSTALL_DIR )
		FIND_PATH( SQLITE3_INCLUDE_DIR sqlite3.h )
		FIND_LIBRARY( SQLITE3_LIBRARIES NAMES sqlite3 )
	ENDIF ( SQLITE3_INSTALL_DIR )

	IF ( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARIES )
		SET( SQLITE3_FOUND 1 )
    SET ( SQLITE3_INCLUDE_DIRS "${SQLITE3_INCLUDE_DIR}" )
	ENDIF ( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARIES )
ENDIF( NOT SQLITE3_FOUND )

if(SQLITE3_FOUND)
  message(STATUS "Found SQLITE3: -L ${SQLITE3_LIBRARIES} -I ${SQLITE3_INCLUDE_DIRS}")
else(SQLITE3_FOUND)
  if(SQLITE3_FIND_REQUIRED)
    message(FATAL_ERROR "Could NOT find SQLITE3" )
  else(SQLITE3_FIND_REQUIRED)
    message(STATUS "Could NOT find SQLITE3")
  endif(SQLITE3_FIND_REQUIRED)
endif(SQLITE3_FOUND)

# Hide advanced variables from CMake GUIs
MARK_AS_ADVANCED( SQLITE3_INCLUDE_DIR SQLITE3_LIBRARIES )
